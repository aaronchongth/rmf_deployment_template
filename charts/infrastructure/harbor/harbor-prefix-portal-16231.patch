Origin: https://github.com/goharbor/harbor/issues/16231

diff --git a/templates/ingress/ingress.yaml b/templates/ingress/ingress.yaml
index e4c0693..de5b9b9 100644
--- a/templates/ingress/ingress.yaml
+++ b/templates/ingress/ingress.yaml
@@ -130,7 +130,7 @@ spec:
             name: {{ template "harbor.core" . }}
             port:
               number: {{ template "harbor.core.servicePort" . }}
-      - path: {{ .portal_path }}
+      - path: /harbor/
         pathType: Prefix
         backend:
           service:
diff --git a/templates/portal/configmap.yaml b/templates/portal/configmap.yaml
index 7b2118e..dd66735 100644
--- a/templates/portal/configmap.yaml
+++ b/templates/portal/configmap.yaml
@@ -54,14 +54,21 @@ data:
             gzip_min_length 1000;
             gzip_proxied expired no-cache no-store private auth;
             gzip_types text/plain text/css application/json application/javascript application/x-javascript text/xml application/xml application/xml+rss text/javascript;
-            location /devcenter-api-2.0 {
+            location /harbor/devcenter-api-2.0 {
+                rewrite ^/harbor/(.*) /$1 break;
                 try_files $uri $uri/ /swagger-ui-index.html;
             }
-            location / {
-                try_files $uri $uri/ /index.html;
+
+            location /harbor/ {
+              rewrite ^/harbor/(.*) /$1 break;
+              try_files $uri $uri/ /index.html;
             }
+
+
             location = /index.html {
                 add_header Cache-Control "no-store, no-cache, must-revalidate";
+                sub_filter 'base href="/"' 'base href="/harbor/"';
+                sub_filter_once on;
             }
         }
     }

